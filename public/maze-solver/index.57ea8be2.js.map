{"mappings":"AAAAA,OAAOC,SAAW,SAAWC,EAAMC,EAAcC,GAE/C,IAAIC,EAAO,KACPC,EAASC,SAASC,eAAe,QACjCC,EAAUH,EAAOI,WAAW,MAC5BC,EAAe,KACfC,EAAY,KACZC,EAAW,KAEXC,EAAa,GAEjBC,MAAMC,KAAKT,SAASU,uBAAuB,mBAAmBC,SAAQ,SAAUC,GAC5EA,EAAGC,iBAAiB,SAAS,WAC7BN,EAAWO,MAAK,IAAIC,EAAMC,OAAOC,KAAKC,QAAQC,QAChD,GACF,IAEA,IAAIC,EAAcC,YAAYhB,EAAWE,GA0BzC,SAASe,EAAUC,GACD,OAAbjB,IACDA,EAAWiB,GAEb,IAAIC,EAAQD,EAAUjB,GApBxB,SAAwBiB,GACtB,IAAI,IAAIE,KAAclB,EACpBkB,IAEFlB,EAAWmB,OAAS,CACtB,CAgBEC,GAdF,SAAiBJ,GAEflB,EAAUuB,MAAQL,CACpB,CAYEM,CAAOL,GAVT,SAAiBD,GACfnB,EAAa0B,OAAOP,EAASzB,EAAMO,EACrC,CASEyB,CAAON,GACPlB,EAAWiB,EAERlB,EAAU0B,SACXC,sBAAsBV,EAE1B,CAEA,SAASP,EAAOkB,EAAGC,GACjB5B,EAAW,KACXC,EAAa,GACbH,EAAeR,EAAaM,EAAS,CACnCiC,SAAUpC,EAAOqC,MACjBC,gBAAiBJ,IAEnBnC,EAAOH,EAAK2C,SAASL,GACrB5B,EAAYR,EAAUC,EAAMoC,GAC5Bd,EAAcC,YAAYhB,EAAWE,EACvC,CAOA,OAxDAP,SAASuC,KAAK1B,iBAAiB,SAAS,SAAU2B,GAChD,GAAInC,GAAcA,EAAU0B,QAA5B,CACA,IAAIU,EAAWD,EAAEE,IAAIC,cAClBF,KAAYrB,GACbA,EAAYqB,IAHuB,CAKvC,IAkDO,CACLG,KANF,SAAeX,EAAGC,GAChBnB,EAAMkB,EAAGC,GACTF,sBAAsBV,EACxB,EAKF,CA9EkB,CA8EfuB,KAAMC,aAAcC","sources":["experiments-static/maze-solver/modules/MazeGame.js"],"sourcesContent":["window.MazeGame = (function (Maze, MazeRenderer, GameState) {\n  \n  var maze = null;\n  var canvas = document.getElementById('maze');\n  var context = canvas.getContext('2d');\n  var mazeRenderer = null;\n  var gameState = null;\n  var lastTime = null;\n\n  var eventQueue = [];\n\n  Array.from(document.getElementsByClassName('js-setMazeSize')).forEach(function (el) {\n      el.addEventListener('click', function () {\n      eventQueue.push(()=>reset(Number(this.dataset.size)));\n    });\n  });\n\n  var keyCommands = KeyCommands(gameState, eventQueue);\n\n  document.body.addEventListener('keyup', function (e) {\n    if(!gameState || !gameState.enabled) return;\n    var lowerKey = e.key.toLowerCase();\n    if(lowerKey in keyCommands) {\n      keyCommands[lowerKey]();\n    }\n  })\n\n  function processEvents (elapsed) {\n    for(var eventThunk of eventQueue) {\n      eventThunk();\n    }\n    eventQueue.length = 0;\n  }\n\n  function update (elapsed) {\n    // update time in seconds\n    gameState.time += elapsed;\n  }\n\n  function render (elapsed) {\n    mazeRenderer.render(elapsed, maze, gameState);\n  }\n\n  function gameLoop (elapsed) {\n    if(lastTime === null) {\n      lastTime = elapsed;\n    }\n    var delta = elapsed - lastTime;\n    processEvents(delta);\n    update(delta);\n    render(delta);\n    lastTime = elapsed;\n\n    if(gameState.enabled) {\n      requestAnimationFrame(gameLoop);\n    }\n  }\n\n  function reset (n, gameOptions) {\n    lastTime = null;\n    eventQueue = [];\n    mazeRenderer = MazeRenderer(context, {\n      mazeSize: canvas.width,\n      mazeNumRowsCols: n,\n    });\n    maze = Maze.generate(n);\n    gameState = GameState(maze, gameOptions);\n    keyCommands = KeyCommands(gameState, eventQueue)\n  }\n  \n  function init (n, gameOptions) {\n    reset(n, gameOptions);\n    requestAnimationFrame(gameLoop);\n  }\n  \n  return {\n    init,\n  }\n})(Maze, MazeRenderer, GameState);\n\n"],"names":["window","MazeGame","Maze1","MazeRenderer1","GameState1","maze","canvas","document","getElementById","context","getContext","mazeRenderer","gameState","lastTime","eventQueue","Array","from","getElementsByClassName","forEach","el","addEventListener","push","reset","Number","this","dataset","size","keyCommands","KeyCommands","gameLoop","elapsed","delta","eventThunk","length","processEvents","time","update","render","enabled","requestAnimationFrame","n","gameOptions","mazeSize","width","mazeNumRowsCols","generate","body","e","lowerKey","key","toLowerCase","init","Maze","MazeRenderer","GameState"],"version":3,"file":"index.57ea8be2.js.map"}