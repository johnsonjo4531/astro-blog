{"mappings":"AAOAA,OAAOC,WAAa,SAAqBC,EAAMC,EAAQ,GACrD,IAOIC,EAPAC,GAAsB,EAC1B,IACE,IAAIC,EAAUC,aAAaC,QAAQ,cAAcN,IACnD,CAAE,MAAOO,GACPJ,GAAsB,CACxB,CAmDA,OA/CED,EADCE,EACMI,KAAKC,MAAML,GAEX,CACLM,OAAQ,IAIZC,OAAOC,OAAOV,EAAM,CAClBW,WAAYC,EAAYC,GAClBb,EAAKc,WAAWD,KAGpBb,EAAKQ,OAAOO,KAAK,CAACH,EAAYC,IAC9Bb,EAAKQ,OAAOQ,MAAK,CAACC,EAAGC,IAAMA,EAAE,GAAKD,EAAE,KACjChB,GACDE,aAAagB,QAAQ,cAAcrB,IAAQQ,KAAKc,UAAUpB,IAE5DA,EAAKqB,OAAOC,cAAc,IAAIC,MAAM,sBACtC,EACAC,eAAA,CAAgBC,GAAQb,EAAYC,KAC3B,4BAA4Ba,KAAKC,OAAOF,OAAWC,KAAKC,OAAOf,OAAgBc,KAAKC,OAAOd,WAEpGC,WAAYD,GACPb,EAAKQ,OAAOoB,OAAS7B,GAAWc,EAAQb,EAAKQ,OAAOT,EAAQ,GAAG,GAMpE8B,OAAQC,GAENA,EAAGC,UAAY,eACTL,KAAKC,OAAO7B,kBAChBE,EAAKQ,OAAOwB,MAAM,EAAEjC,GAASkC,KAAI,CAACC,EAAGC,IAAInC,EAAKwB,eAAeW,EAAE,EAAGD,KAAIE,KAAK,OAAS,qDACnFnC,EAAgC,GAJrB,6LAMhB,EACAoC,QACErC,EAAKQ,OAAS,GACXP,GACDE,aAAagB,QAAQ,cAAcrB,IAAQQ,KAAKc,UAAUpB,IAE5DA,EAAKqB,OAAOC,cAAc,IAAIC,MAAM,qBACtC,EACAF,OAAQiB,SAASC,cAAc,SAG1BvC,CACT","sources":["experiments-static/snake/js/lib/ScoreBoard.js"],"sourcesContent":["/**\n * Stores scores in local storage at `scoreboard-${name}`\n * @param {String} name \n * The name for storing in local storage\n * @param {Number} numKeep \n * The number of top scores to keep\n */\nwindow.ScoreBoard = function ScoreBoard (name, numKeep=5) {\n  var localStorageWorking = true;\n  try {\n    var storage = localStorage.getItem(`scoreboard-${name}`);\n  } catch (e) {\n    localStorageWorking = false;\n  }\n\n  var that;\n  if(storage) {\n    that = JSON.parse(storage);\n  } else {\n    that = {\n      scores: []\n    };\n  } \n\n  Object.assign(that, {\n    writeScore (playerName, score) {\n      if(!that.isTopScore(score)) {\n        return;\n      }\n      that.scores.push([playerName, score]);\n      that.scores.sort((a, b) => b[1] - a[1]);\n      if(localStorageWorking) {\n        localStorage.setItem(`scoreboard-${name}`, JSON.stringify(that));\n      }\n      that.events.dispatchEvent(new Event('high-score-update'));\n    },\n    singleScoreStr (place, [playerName, score]) {\n      return `<div class=\"score-entry\">${HTML.escape(place)}. ${HTML.escape(playerName)}: ${HTML.escape(score)}</div>`;\n    },\n    isTopScore (score) {\n      if(that.scores.length < numKeep || score > that.scores[numKeep-1][1]) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    render (el) {\n      var message = `<h6>LocalStorage doesn't seem to be working in your browser are you <a href=\"https://stackoverflow.com/questions/32374875/localstorage-not-working-in-edge\">using edge</a>?</h6>`;\n      el.innerHTML = `\n      <h2>${HTML.escape(name)}</h2>\n      ${that.scores.slice(0,numKeep).map((x, i)=>that.singleScoreStr(i+1, x)).join('\\n') || \"Play a game to get your high score here.\"}\n      ${!localStorageWorking ? message : ''}\n      `;\n    },\n    reset () {\n      that.scores = [];\n      if(localStorageWorking) {\n        localStorage.setItem(`scoreboard-${name}`, JSON.stringify(that));\n      }\n      that.events.dispatchEvent(new Event('high-score-update'));\n    },\n    events: document.createElement('div'),\n  });\n\n  return that;\n}\n"],"names":["window","ScoreBoard","name","numKeep","that","localStorageWorking","storage","localStorage","getItem","e","JSON","parse","scores","Object","assign","writeScore","playerName","score","isTopScore","push","sort","a","b","setItem","stringify","events","dispatchEvent","Event","singleScoreStr","place","HTML","escape","length","render","el","innerHTML","slice","map","x","i","join","reset","document","createElement"],"version":3,"file":"index.08445219.js.map"}