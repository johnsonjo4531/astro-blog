{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-f9b4a115eb27a5a4.js","node_modules/@parcel/runtime-js/lib/runtime-21a610945f35f2f4.js","node_modules/@parcel/runtime-js/lib/runtime-d403c60bccdfb130.js","node_modules/@parcel/runtime-js/lib/runtime-b9579f4624df8cf5.js","node_modules/@parcel/runtime-js/lib/runtime-361d3bbabd444d2c.js","node_modules/@parcel/runtime-js/lib/runtime-a7d661e09c4f4b00.js","experiments-static/brick-breaker/modules/GameView.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"gkArp\\\":\\\"index.69dd4dab.js\\\",\\\"1Z8QG\\\":\\\"01_A_Night_Of_Dizzy_Spells.fa6849de.mp3\\\",\\\"9gFBn\\\":\\\"270326__littlerobotsoundfactory__hit-01.9fbcad9b.wav\\\",\\\"dCEoQ\\\":\\\"270325__littlerobotsoundfactory__hit-02.41e70eea.wav\\\",\\\"eBzW3\\\":\\\"270328__littlerobotsoundfactory__hero-death-00.513b0fae.wav\\\",\\\"7wgWd\\\":\\\"270333__littlerobotsoundfactory__jingle-win-00.30144d7b.wav\\\"}\"));","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"1Z8QG\")).toString();","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"9gFBn\")).toString();","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"dCEoQ\")).toString();","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"eBzW3\")).toString();","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"7wgWd\")).toString();","window.GameView = (function GameView (GameLoop) {\n  window.OverlayViewSet = null;\n  let EmptyView = ViewStarters.EmptyView('EmptyView');\n  let PauseView = ViewStarters.ButtonView('PauseView', $('#pause-view')[0]);\n  let GameOverView = ViewStarters.ButtonView('GameOverView', $('#game-over-view')[0], () => {\n    MainView.loadView(MenuView.name);\n  });\n  var gameLoop = null;\n  var keyboardHandler = null;\n  \n  const displayScore = (state) => {\n    $$('.js-score-here').forEach(el => {\n      el.innerHTML = '';\n      el.appendChild(document.createTextNode(state.points))\n    });\n  }\n\n  function render () {\n    keyboardHandler.activate();\n    OverlayViewSet.loadView(EmptyView.name);\n    AudioPool.playMusic('game');\n    GameLoop.start();\n  }\n\n  function unrender () {\n    OverlayViewSet.loadView(EmptyView.name);\n    keyboardHandler.deactivate();\n    GameLoop.end();\n  }\n\n  async function init () {\n    var quips = [\n      \"This is why we can't have nice things.\",\n      \"Better luck next time!\",\n      \"Vandal! Stop breaking my stuff!\",\n      \"Much Wow! Many points! Very Break!\",\n      \"Holy cow Batman!\",\n      \"That just might be the greatest thing I've ever seen!\",\n    ];\n    OverlayViewSet =  ViewSwitcher();\n    var canvas = $('#game-canvas')[0];\n    var renderer = GameRenderer(canvas);\n    // start up the game loop\n    GameLoop.init(renderer, {\n      width: renderer.width,\n      height: renderer.height,\n      unit: renderer.unit,\n      gameOver (state) {\n        if(state.winner) {\n          AudioPool.playSFX('game_win');\n          var header = $('#game-over-header')[0];\n          header.innerHTML = 'You Win!';\n        } else {\n          AudioPool.playSFX('game_over');\n          var header = $('#game-over-header')[0];\n          header.innerHTML = 'Game Over';\n        }\n        // display the final score\n        displayScore(state);\n        // display the quip about the score\n        var quipNum = Math.min(Math.floor(state.points / state.maxPoints * (quips.length-1)), quips.length - 1)\n        var quip = quips[quipNum];\n        $$('.js-score-quip-here').forEach(el => {\n          el.innerHTML = '';\n          el.appendChild(document.createTextNode(quip))\n        });\n        // load game over view or custom name modal\n        if(scoreboard.isTopScore(state.points)) {\n          var name = PromptScreen(`\n          <h2>You got a High Score!</h2>\n          <h5>Enter your name below and hit submit click enter! You could hit cancel though if you want to be all secret secret.</h5>\n          `).then(function (name) {\n            if(name) {\n              scoreboard.writeScore(name, state.points);\n            }\n            AudioPool.playSFX('menu_click');\n            OverlayViewSet.loadView(GameOverView.name);\n          })\n        } else {\n          OverlayViewSet.loadView(GameOverView.name);\n        }\n      }\n    },);\n\n    // load some sounds\n    AudioPool.addMusic('game', new URL('../assets/01_A_Night_Of_Dizzy_Spells.mp3', import.meta.url));\n    AudioPool.addSFX('paddle_hit', new URL('../assets/270326__littlerobotsoundfactory__hit-01.wav', import.meta.url));\n    AudioPool.addSFX('brick_hit', new URL('../assets/270325__littlerobotsoundfactory__hit-02.wav', import.meta.url));\n    AudioPool.addSFX('game_over', new URL('../assets/270328__littlerobotsoundfactory__hero-death-00.wav', import.meta.url));\n    AudioPool.addSFX('game_win', new URL('../assets/270333__littlerobotsoundfactory__jingle-win-00.wav', import.meta.url));\n\n    // listen for pause event\n    keyboardHandler = KeyboardHandler(true);\n    keyboardHandler.addOnceAction('Escape', () => {\n      // toggle between\n      if (OverlayViewSet.currentView.name != PauseView.name) {\n        GameLoop.state.paused = true;\n        OverlayViewSet.loadView(PauseView.name);\n      } else {\n        GameLoop.state.paused = false;\n        OverlayViewSet.loadView(EmptyView.name);\n      }\n    });\n\n    Events.on($(`#pause-view [data-view-transition=\"${EmptyView.name}\"]`), 'click', function (e) {\n      GameLoop.state.paused = false;\n    })\n\n    Events.onPageVisibility(function (e) {\n      if(e.hidden) {\n        if(MainView.currentView.name === GameView.name && OverlayViewSet.currentView.name === EmptyView.name) {\n          GameLoop.state.paused = true;\n          OverlayViewSet.loadView(PauseView.name);\n        }\n      }\n    });\n\n    // set up sub-views\n    OverlayViewSet.events.addEventListener('view-loaded', function (e) {\n      if(e.name === GameOverView.name) {\n        keyboardHandler.deactivate();\n      } else {\n        if(e.name === PauseView.name) {\n          displayScore(GameLoop.state);\n        }\n        keyboardHandler.activate();\n      }\n    });\n    OverlayViewSet.addViews(EmptyView, PauseView, GameOverView);\n    OverlayViewSet.loadView(EmptyView.name); \n  }\n\n  return {\n    render,\n    unrender,\n    init,\n    name: \"GameView\",\n  }\n})(GameLoop)\n"],"names":["parcelRequire","register","JSON","parse","$caa3998a9cd267df$exports","URL","resolve","import","meta","url","toString","$6f7ec6036b4d7eed$exports","$b8924fb33b6d783b$exports","$e218daa6dc6d9f67$exports","$a25971948e76cb74$exports","window","GameView","GameLoop1","OverlayViewSet","EmptyView","ViewStarters","PauseView","ButtonView","$","GameOverView","MainView","loadView","MenuView","name","keyboardHandler","displayScore","state","$$","forEach","el","innerHTML","appendChild","document","createTextNode","points","activate","AudioPool","playMusic","start","deactivate","end","async","quips","ViewSwitcher","canvas","renderer","GameRenderer","init","width","height","unit","gameOver","winner","playSFX","quipNum","Math","min","floor","maxPoints","length","quip","scoreboard","isTopScore","PromptScreen","then","writeScore","addMusic","addSFX","KeyboardHandler","addOnceAction","currentView","paused","Events","on","e","onPageVisibility","hidden","events","addEventListener","addViews","GameLoop"],"version":3,"file":"index.69dd4dab.js.map"}