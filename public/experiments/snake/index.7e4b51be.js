window.GameView=function e(){window.OverlayViewSet=null;let a=ViewStarters.EmptyView("EmptyView"),i=ViewStarters.ButtonView("PauseView",$("#pause-view")[0]),n=ViewStarters.ButtonView("GameOverView",$("#game-over-view")[0],(()=>{MainView.loadView(MenuView.name)}));var t=null;const o=e=>{$$(".js-score-here").forEach((a=>{a.innerHTML="",a.appendChild(document.createTextNode(e.points))}))};return{render:function(){t.activate(),OverlayViewSet.loadView(a.name),AudioPool.playMusic("game"),GameLoop.start()},unrender:function(){OverlayViewSet.loadView(a.name),t.deactivate(),GameLoop.end()},init:function(){OverlayViewSet=ViewSwitcher();var r=$("#game-canvas")[0],w=GameRenderer(r);GameLoop.init(w,{width:w.width,height:w.height,unit:w.unit,gameOver(e){e.winner?(AudioPool.playSFX("game_win"),$("#game-over-header")[0].innerHTML="You Win!"):(AudioPool.playSFX("game_over"),$("#game-over-header")[0].innerHTML="Game Over");if(o(e),scoreboard.isTopScore(e.points))PromptScreen("\n          <h2>You got a High Score!</h2>\n          <h5>Enter your name below and hit submit click enter! You could hit cancel though if you want to be all secret secret.</h5>\n          ").then((function(a){a&&scoreboard.writeScore(a,e.points),AudioPool.playSFX("menu_click"),OverlayViewSet.loadView(n.name)}));else OverlayViewSet.loadView(n.name)}}),(t=KeyboardHandler(!0)).addOnceAction("Escape",(()=>{MainView.currentView.name===e.name&&(OverlayViewSet.currentView.name!=i.name?(GameLoop.state.paused=!0,OverlayViewSet.loadView(i.name)):(GameLoop.state.paused=!1,OverlayViewSet.loadView(a.name)))})),Events.on($(`#pause-view [data-view-transition="${a.name}"]`),"click",(function(e){GameLoop.state.paused=!1})),Events.onPageVisibility((function(n){n.hidden&&MainView.currentView.name===e.name&&OverlayViewSet.currentView.name===a.name&&(GameLoop.state.paused=!0,OverlayViewSet.loadView(i.name))})),OverlayViewSet.events.addEventListener("view-loaded",(function(e){e.name===n.name?t.deactivate():(e.name===i.name&&o(GameLoop.state),t.activate())})),OverlayViewSet.addViews(a,i,n),OverlayViewSet.loadView(a.name)},name:"GameView"}}();
//# sourceMappingURL=index.7e4b51be.js.map
