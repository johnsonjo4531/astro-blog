{"mappings":"AAAAA,OAAOC,SAAW,SAAoBC,EAAWC,EAAcC,GAE9D,IAAIC,GAAU,EACVC,EAAW,KACf,IAAIC,EAAW,CAAEC,SAAW,GAC5B,IAAIC,EAAQ,KACZ,IAAIC,EAAgB,KAChBC,EAAc,KAgBlB,SAASC,EAAUC,GAChB,GAAIJ,IAASA,EAAMK,UAAaT,EAAhC,CAGGC,IACLA,EAAWO,GAEV,IAAIE,EAAUF,EAAUP,EACvBA,EAAWO,EAtBd,SAAsBE,GACpBJ,EAAYK,OAAOD,EAASN,EAC9B,CAqBGQ,CAAYF,GAnBf,SAAiBA,GAEfN,EAAMS,OAAOH,GACbR,EAASY,YAAYV,EACvB,CAgBCS,CAAOH,GAdR,SAAiBA,GACfR,EAASC,OAAOC,EAAOM,EACzB,CAaEP,CAAOO,IAEHN,EAAMK,UAAYT,EACvBe,sBAAsBR,IAEtBD,EAAYU,aACZZ,EAAQ,KAfJ,CAiBL,CAqBA,MAAO,C,MAnBP,WACGJ,GAAU,EACXI,EAAQP,EAAUQ,GAClBU,sBAAsBR,GACtBD,EAAYW,UACd,E,IAEA,WACGjB,GAAU,EACVC,EAAW,IACd,E,KAEA,SAAeiB,EAAaC,GAC1BjB,EAAWgB,EACXb,EAAgBc,EAChBb,EAAcP,IACdO,EAAYc,cACd,EAMMhB,YACL,OAAOA,CACN,EAED,CAvEgB,CAuEbiB,UAAWC,aAAcC","sources":["experiments-static/snake/js/game/GameLoop.js"],"sourcesContent":["window.GameLoop = (function GameLoop (GameState, GameRenderer, GameActions) {\n\n\tvar running = false;\n\tvar lastTime = null;\n\tlet renderer = { render () {} };\n\tvar state = null;\n\tlet gameStateSpec = null;\n\tlet gameActions = null;\n\t\n\tfunction handleInput (elapsed) {\n\t  gameActions.handle(elapsed, state)\n\t}\n  \n\tfunction update (elapsed) {\n\t  //state.update(elapsed);\n\t  state.update(elapsed);\n\t  renderer.renderSound(state);\n\t}\n  \n\tfunction render (elapsed) {\n\t  renderer.render(state, elapsed);\n\t}\n  \n\tfunction gameLoop (timeNow) {\n    if(!state || state.gameOver || !running) {\n      return;\n    }\n\t  if(!lastTime) {\n\t\tlastTime = timeNow;\n\t  }\n\t  var elapsed = timeNow - lastTime;\n    lastTime = timeNow;\n    handleInput(elapsed);\n\t\tupdate(elapsed);\n\t  render(elapsed);\n  \n\t  if(!state.gameOver && running) {\n\t\trequestAnimationFrame(gameLoop);\n\t  } else {\n\t\tgameActions.deactivate();\n\t\tstate = null;\n\t  }\n\t}\n\t\n\tfunction start () {\n    running = true;\n\t  state = GameState(gameStateSpec);\n\t  requestAnimationFrame(gameLoop);\n\t  gameActions.activate();\n\t}\n  \n\tfunction end () {\n    running = false;\n    lastTime = null;\n\t}\n  \n\tfunction init (newRenderer, spec) {\n\t  renderer = newRenderer;\n\t  gameStateSpec = spec;\n\t  gameActions = GameActions();\n\t  gameActions.setupActions();\n\t}\n  \n\treturn {\n\t  start,\n\t  end,\n\t  init,\n\t  get state () {\n\t\treturn state;\n\t  },\n\t}\n  })(GameState, GameRenderer, GameActions);\n"],"names":["window","GameLoop","GameState1","GameRenderer1","GameActions1","running","lastTime","renderer","render","state","gameStateSpec","gameActions","gameLoop","timeNow","gameOver","elapsed","handle","handleInput","update","renderSound","requestAnimationFrame","deactivate","activate","newRenderer","spec","setupActions","GameState","GameRenderer","GameActions"],"version":3,"file":"index.9a5138ae.js.map"}