{"mappings":"AAAAA,OAAOC,OAAS,SAAWC,GAuBzB,SAASC,EAAMC,EAAKC,EAAOC,GACzB,IAAIC,EAAaC,GAAM,SAASC,EAAUC,GACxCJ,EAAGK,KAAKC,KAAMF,GACdF,EAAGK,oBAAoBR,EAAOI,EAChC,EACIK,EAAY,GAMhB,OALAV,EAAIW,SAAQ,SAAUP,GACpB,IAAIC,EAAWF,EAAWC,GAC1BA,EAAGQ,iBAAiBX,EAAOI,GAC3BK,EAAUG,KAAKR,EACjB,IACO,CACLS,UAAA,IACSd,EAAIW,SAAQ,SAAUP,GAC3B,IAAIC,EAAWK,EAAUK,QACzBX,EAAGK,oBAAoBR,EAAOI,EAChC,IAGN,CAoBA,IAAIW,EAAQC,EAmBZ,YAlB+B,IAApBC,SAASF,QAClBA,EAAS,SACTC,EAAmB,yBACmB,IAAtBC,SAASC,UACzBH,EAAS,WACTC,EAAmB,2BACuB,IAA1BC,SAASE,eACzBJ,EAAS,eACTC,EAAmB,0BAUd,C,GAhFP,SAAajB,EAAKC,EAAOC,GAIvB,OAHAF,EAAIW,SAAQ,SAAUP,GACpBA,EAAGQ,iBAAiBX,EAAOC,EAC7B,IACO,CACLY,YACEd,EAAIW,SAAQ,SAAUP,GACpBA,EAAGK,oBAAoBR,EAAOC,EAChC,GACF,EAEJ,E,KAuEEH,E,QAvCF,SAAkBC,EAAKqB,EAAenB,GAEpC,IAAIoB,EAAUvB,EAAKC,EAAK,SAAS,SAASuB,EAAiBjB,GACtDA,EAAEkB,MAAQH,EACXnB,EAAGK,KAAKC,KAAMF,GAGdgB,EAAUvB,EAAKC,EAAK,QAASuB,EAEjC,IACA,MAAO,CACLT,YACEQ,EAAQR,WACV,EAEJ,E,iBAcA,SAA2BZ,GACzBgB,SAASN,iBAAiBK,GAAkB,SAAUX,GACpDJ,EAAGK,KAAKC,KAAMiB,OAAOC,OAAOpB,EAAG,CAC7BU,OAAQE,SAASF,KAErB,IAAG,EACL,E,cAjEA,SAAwBZ,GACtB,IAAIH,EAAQ,IAAI0B,WAAW,QAAS,CAClCC,KAAMhC,OACNiC,SAAS,EACTC,YAAY,IAEG1B,EAAG2B,cAAc9B,EACpC,EAmEF,CAxFgB,CAwFb+B","sources":["experiments-static/snake/js/lib/Events.js"],"sourcesContent":["window.Events = (function ($$) {\n  function on (els, event, cb) {\n    els.forEach(function (el) {\n      el.addEventListener(event, cb);\n    })\n    return {\n      removeAll () {\n        els.forEach(function (el) {\n          el.removeEventListener(event, cb);\n        });\n      }\n    }\n  }\n\n  function simulateClick (el) {\n    var event = new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true\n    });\n    var cancelled = !el.dispatchEvent(event);\n  }\n\n  function once (els, event, cb) {\n    var elListener = el => function listener (e) {\n      cb.call(this, e);\n      el.removeEventListener(event, listener)\n    };\n    var listeners = [];\n    els.forEach(function (el) {\n      let listener = elListener(el);\n      el.addEventListener(event, listener);\n      listeners.push(listener);\n    })\n    return {\n      removeAll () {\n        return els.forEach(function (el) {\n          let listener = listeners.shift();\n          el.removeEventListener(event, listener);\n        });\n      }\n    }\n  }\n\n  function onceKey (els, keyIdentifier, cb) {\n\n    var current = once(els, 'keyup', function ListeningForKey (e) {\n      if(e.key === keyIdentifier) {\n        cb.call(this, e);\n      } else {\n        // recursive event!\n        current = once(els, 'keyup', ListeningForKey);\n      }\n    })\n    return {\n      removeAll () {\n        current.removeAll();\n      }\n    }\n  }\n\n  // Set the name of the hidden property and the change event for visibility\n  var hidden, visibilityChange; \n  if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n    hidden = \"hidden\";\n    visibilityChange = \"visibilitychange\";\n  } else if (typeof document.msHidden !== \"undefined\") {\n    hidden = \"msHidden\";\n    visibilityChange = \"msvisibilitychange\";\n  } else if (typeof document.webkitHidden !== \"undefined\") {\n    hidden = \"webkitHidden\";\n    visibilityChange = \"webkitvisibilitychange\";\n  }\n  function onPageVisibility (cb) {\n    document.addEventListener(visibilityChange, function (e) {\n      cb.call(this, Object.assign(e, {\n        hidden: document[hidden],\n      }));\n    }, false);\n  }\n\n  return {\n    on,\n    once,\n    onceKey,\n    onPageVisibility,\n    simulateClick,\n  }\n})($$);\n"],"names":["window","Events","$$1","once","els","event","cb","elListener","el","listener","e","call","this","removeEventListener","listeners","forEach","addEventListener","push","removeAll","shift","hidden","visibilityChange","document","msHidden","webkitHidden","keyIdentifier","current","ListeningForKey","key","Object","assign","MouseEvent","view","bubbles","cancelable","dispatchEvent","$$"],"version":3,"file":"index.c6f2b070.js.map"}