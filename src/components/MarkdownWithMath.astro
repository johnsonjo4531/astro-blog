---
import { unified } from 'unified';
import remarkParse from 'remark-parse';
import remarkMath from 'remark-math';
import remarkRehype from 'remark-rehype';
import rehypeKatex from 'rehype-katex';
import rehypeStringify from 'rehype-stringify';

interface Props {
  content: string;
}

const { content } = Astro.props;

const result = await unified()
  .use(remarkParse)
  .use(remarkMath)
  .use(remarkRehype)
  .use(rehypeKatex)
  .use(rehypeStringify)
  .process(content);

const renderedHtml = result.toString();
---

<div class="markdown-with-math" set:html={renderedHtml} />

<style is:global>
  /* Scoped KaTeX styles */
  @import "https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css";
</style>
